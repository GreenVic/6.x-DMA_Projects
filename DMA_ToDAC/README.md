# DMA_ToDAC
Пример выводит сигнал в ЦАП посредством DMA по отсчетам таймера.

Помимо вывода сигнала, проект показывает, что для работы с DMA необходимо включать тактирование всех блоков SSP. Если этого не сделать, то прерывания DMA начинают генерироваться постоянно, еще до инициализации таймера и разрешения ему работать на DMA. При этом основная ветвь перестает исполняться, что демонстрируют два светодиода.

Оба светодиода зажигаются при старте инициализации и выключаются при окончании инициализации. Далее в основном цикле мигает только один светодиод, показывая что исполнение проходит штатно. При этом на выходе ЦАП осциллографом можно увидеть выводимый сигнал синуса. (Сигнал можно поменять если выбрать другую функцию рассчета сигнала в коде)

Баг активируется макроопределением BUG_SSPx_ACTIVATE. При этом загораются оба светодиода и останутся гореть, т.к. цикл инициализации прерывается непрерывными прерываниями от SSP.

Баг связан с тем, что при включении МК со стороны SSP к NVIC стоит активный сигнал запроса прерывания. При разрешении тактирования SSP этот сигнал запроса приходит в состояние, согласованное с регистром SSP в котором запрос на прерывание по умолчанию выключен. Поэтому включение тактирования SSP помогает избавиться от лишних прерываний от DMA.
